[gd_scene load_steps=21 format=2]

[ext_resource path="res://scripts/gameplay.gd" type="Script" id=1]
[ext_resource path="res://tilesets/dungeon.tres" type="TileSet" id=2]
[ext_resource path="res://assets/ball.png" type="Texture" id=3]
[ext_resource path="res://assets/SpencersSpookyFontMONO.ttf" type="DynamicFontData" id=4]
[ext_resource path="res://assets/FastForward1.png" type="Texture" id=5]
[ext_resource path="res://scripts/fast_forward.gd" type="Script" id=6]
[ext_resource path="res://scenes/torch.tscn" type="PackedScene" id=7]
[ext_resource path="res://assets/kys.wav" type="AudioStream" id=8]
[ext_resource path="res://assets/smoke_puff.png" type="Texture" id=9]
[ext_resource path="res://scripts/block_destroyed.gd" type="Script" id=10]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 23.7529, 307.852 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 181.263, 38.2136 )

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 169.8, 27.4901 )

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 170.769, 113.479 )

[sub_resource type="RectangleShape2D" id=5]
extents = Vector2( 20.0176, 20 )

[sub_resource type="DynamicFont" id=6]
size = 32
font_data = ExtResource( 4 )

[sub_resource type="DynamicFont" id=7]
size = 32
font_data = ExtResource( 4 )

[sub_resource type="StyleBoxTexture" id=8]

[sub_resource type="DynamicFont" id=9]
size = 32
font_data = ExtResource( 4 )

[sub_resource type="ParticlesMaterial" id=10]
emission_shape = 1
emission_sphere_radius = 2.0
flag_disable_z = true
flatness = 1.0
gravity = Vector3( 0, -50, 0 )
initial_velocity = 16.0
initial_velocity_random = 0.35
angular_velocity = 6.01853e-36
angular_velocity_random = 0.41
orbit_velocity = 0.0
orbit_velocity_random = 0.0
damping = 35.0
scale = 0.1
scale_random = 0.05
color = Color( 1, 1, 1, 0.301961 )

[node name="gameplay" type="Node2D"]
script = ExtResource( 1 )

[node name="base" type="TileMap" parent="."]
position = Vector2( -11, 0 )
scale = Vector2( 3, 3 )
tile_set = ExtResource( 2 )
cell_size = Vector2( 16, 16 )
format = 1
tile_data = PoolIntArray( 65536, 536870930, 0, 65537, 536870922, 0, 65538, 536870923, 0, 65539, 536870922, 0, 65540, 536870922, 0, 65541, 11, 0, 65542, 536870922, 0, 65543, 536870928, 0, 131072, 1610612742, 0, 131073, 536870957, 0, 131074, 536870957, 0, 131075, 536870956, 0, 131076, 536870955, 0, 131077, 536870955, 0, 131078, 536870955, 0, 131079, 1610612742, 0, 196608, 1610612743, 0, 196609, 536870960, 0, 196610, 536870970, 0, 196611, 536870965, 0, 196612, 536870957, 0, 196613, 536870957, 0, 196614, 536870957, 0, 196615, 536870919, 0, 262144, 1610612742, 0, 262145, 536870960, 0, 262146, 536870960, 0, 262147, 536870960, 0, 262148, 536870960, 0, 262149, 536870960, 0, 262150, 536870960, 0, 262151, 1610612742, 0, 327680, 1610612742, 0, 327681, 536870960, 0, 327682, 536870969, 0, 327683, 536870960, 0, 327684, 536870960, 0, 327685, 536870960, 0, 327686, 536870960, 0, 327687, 1610612742, 0, 393216, 536870919, 0, 393217, 536870960, 0, 393218, 536870960, 0, 393219, 536870970, 0, 393220, 536870960, 0, 393221, 536870968, 0, 393222, 536870963, 0, 393223, 1610612742, 0, 458752, 1610612742, 0, 458753, 536870960, 0, 458754, 536870960, 0, 458755, 536870960, 0, 458756, 536870960, 0, 458757, 536870959, 0, 458758, 536870936, 0, 458759, 1610612742, 0, 524288, 1610612742, 0, 524289, 536870971, 0, 524290, 536870960, 0, 524291, 536870968, 0, 524292, 536870963, 0, 524293, 536870962, 0, 524294, 536870936, 0, 524295, 1610612742, 0, 589824, 1610612742, 0, 589825, 536870963, 0, 589826, 536870963, 0, 589827, 536870962, 0, 589828, 536870936, 0, 589829, 536870936, 0, 589830, 536870936, 0, 589831, 1610612743, 0, 655360, 1610612743, 0, 655361, 536870955, 0, 655362, 536870955, 0, 655363, 536870955, 0, 655364, 536870955, 0, 655365, 536870936, 0, 655366, 536870936, 0, 655367, 1610612742, 0, 720896, 1610612742, 0, 720897, 536870954, 0, 720898, 536870954, 0, 720899, 536870954, 0, 720900, 536870954, 0, 720901, 536870954, 0, 720902, 536870954, 0, 720903, 1610612742, 0, 786432, 536870917, 0, 786433, 536870941, 0, 786434, 536870942, 0, 786435, 536870943, 0, 786436, 536870944, 0, 786437, 536870943, 0, 786438, 536870946, 0, 786439, 536870917, 0, 851968, 536870931, 0, 851969, 536870931, 0, 851970, 536870931, 0, 851971, 536870931, 0, 851972, 536870931, 0, 851973, 536870931, 0, 851974, 536870931, 0, 851975, 536870931, 0, 917504, 536870932, 0, 917505, 536870932, 0, 917506, 536870932, 0, 917507, 536870932, 0, 917508, 536870932, 0, 917509, 536870932, 0, 917510, 536870932, 0, 917511, 536870932, 0, 983040, 536870932, 0, 983041, 536870932, 0, 983042, 536870932, 0, 983043, 536870932, 0, 983044, 536870932, 0, 983045, 536870932, 0, 983046, 536870932, 0, 983047, 536870932, 0, 1048576, 536870932, 0, 1048577, 536870932, 0, 1048578, 536870932, 0, 1048579, 536870932, 0, 1048580, 536870932, 0, 1048581, 536870932, 0, 1048582, 536870932, 0, 1048583, 536870932, 0 )

[node name="deco" type="TileMap" parent="."]
position = Vector2( -12, 0 )
scale = Vector2( 3, 3 )
z_index = 3
tile_set = ExtResource( 2 )
cell_size = Vector2( 16, 16 )
format = 1
tile_data = PoolIntArray( 720897, 536870974, 0, 720902, 536870974, 0, 786433, 536870973, 0, 786438, 536870973, 0 )

[node name="walls" type="Node2D" parent="."]
editor/display_folded = true

[node name="wall_right" type="StaticBody2D" parent="walls"]
position = Vector2( 360, 357.063 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="walls/wall_right" groups=[
"wall",
]]
position = Vector2( -12, 0 )
shape = SubResource( 1 )

[node name="wall_left" type="StaticBody2D" parent="walls"]
position = Vector2( 0, 357 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="walls/wall_left" groups=[
"wall",
]]
position = Vector2( 12, 0 )
shape = SubResource( 1 )

[node name="wall_bottom" type="Area2D" parent="walls"]
position = Vector2( 180, 662.214 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="walls/wall_bottom"]
shape = SubResource( 2 )

[node name="wall_top" type="StaticBody2D" parent="walls"]
position = Vector2( 179.022, 59.8737 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="walls/wall_top"]
position = Vector2( 1, 8 )
shape = SubResource( 3 )

[node name="danger_zone" type="Area2D" parent="walls"]
position = Vector2( 180, 633 )

[node name="collider" type="CollisionShape2D" parent="walls/danger_zone"]
shape = SubResource( 4 )

[node name="StaticBody2D" type="StaticBody2D" parent="walls"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="walls/StaticBody2D"]
position = Vector2( 60, 600 )
shape = SubResource( 5 )

[node name="CollisionShape2D2" type="CollisionShape2D" parent="walls/StaticBody2D"]
position = Vector2( 299.917, 602.781 )
shape = SubResource( 5 )

[node name="dragger" type="Line2D" parent="."]
points = PoolVector2Array( 385.031, 564.511 )
width = 3.0
default_color = Color( 1, 1, 1, 1 )
texture_mode = 104360705
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
sharp_limit = 20.0

[node name="ui" type="CanvasLayer" parent="."]

[node name="top_black" type="ColorRect" parent="ui"]
anchor_right = 1.0
margin_bottom = 50.0
color = Color( 0, 0, 0, 1 )

[node name="top_container" type="MarginContainer" parent="ui"]
editor/display_folded = true
anchor_right = 1.0
margin_left = 15.0
margin_top = 10.0
margin_right = -15.0

[node name="hbox" type="HBoxContainer" parent="ui/top_container"]
margin_right = 330.0
margin_bottom = 24.0

[node name="TextureRect" type="TextureRect" parent="ui/top_container/hbox"]
margin_right = 24.0
margin_bottom = 24.0
size_flags_vertical = 4
texture = ExtResource( 3 )

[node name="ball_number" type="Label" parent="ui/top_container/hbox"]
margin_left = 28.0
margin_right = 126.0
margin_bottom = 24.0
size_flags_horizontal = 3
custom_fonts/font = SubResource( 6 )
text = " X 0"
valign = 1

[node name="wave_label" type="Label" parent="ui/top_container/hbox"]
margin_left = 130.0
margin_right = 228.0
margin_bottom = 24.0
size_flags_horizontal = 3
size_flags_vertical = 7
custom_fonts/font = SubResource( 7 )
text = "1"
align = 1
valign = 1

[node name="points" type="Label" parent="ui/top_container/hbox"]
margin_left = 232.0
margin_right = 330.0
margin_bottom = 24.0
size_flags_horizontal = 3
size_flags_vertical = 3
custom_styles/normal = SubResource( 8 )
custom_fonts/font = SubResource( 9 )
text = "0"
align = 2

[node name="fast_forward" type="TextureButton" parent="ui"]
visible = false
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -65.0
margin_top = -65.0
margin_right = -25.0
margin_bottom = -25.0
texture_normal = ExtResource( 5 )
expand = true
script = ExtResource( 6 )

[node name="tween" type="Tween" parent="ui/fast_forward"]
repeat = true
playback/repeat = true

[node name="shade" type="CanvasModulate" parent="."]
color = Color( 0.27451, 0.27451, 0.27451, 1 )

[node name="lights" type="Node2D" parent="."]
editor/display_folded = true
z_index = 4

[node name="torch" parent="lights" instance=ExtResource( 7 )]
position = Vector2( 59.9824, 575.644 )

[node name="torch2" parent="lights" instance=ExtResource( 7 )]
position = Vector2( 299.844, 575.811 )

[node name="torch3" parent="lights" instance=ExtResource( 7 )]
position = Vector2( 348.814, 61.2514 )

[node name="torch4" parent="lights" instance=ExtResource( 7 )]
position = Vector2( 13.8135, 61.2514 )

[node name="sounds" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource( 8 )
pitch_scale = 2.0

[node name="block_destroyed" type="Particles2D" parent="."]
position = Vector2( -95.2824, 18.1052 )
amount = 16
lifetime = 2.0
explosiveness = 1.0
process_material = SubResource( 10 )
texture = ExtResource( 9 )
script = ExtResource( 10 )

[connection signal="body_entered" from="walls/wall_bottom" to="." method="_on_wall_bottom_body_entered"]
[connection signal="area_entered" from="walls/danger_zone" to="." method="_on_danger_zone_area_entered"]
[connection signal="body_entered" from="walls/danger_zone" to="." method="_on_danger_zone_body_entered"]
[connection signal="pressed" from="ui/fast_forward" to="." method="_on_fast_forward_pressed"]
[connection signal="finished" from="sounds" to="." method="_on_AudioStreamPlayer2D_finished"]
